{"ast":null,"code":"var _jsxFileName = \"/home/rails/Desktop/parking_app/src/Components/ModalPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { Button, Modal, Typography, Box, Grid } from '@material-ui/core';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useContext } from \"react\";\nimport DataContext from '../Context/DataContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst style = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: 400,\n  bgcolor: 'background.paper',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 4\n};\n\nconst ModalPage = () => {\n  _s();\n\n  const {\n    open,\n    price,\n    parkingSlots,\n    time,\n    value,\n    setValue\n  } = useContext(DataContext);\n  let {\n    slotID\n  } = useParams();\n  console.log(slotID);\n  let navigate = useNavigate();\n\n  const handleBack = () => {\n    navigate('/layout');\n  };\n\n  const handlePayment = async slotID => {\n    const latestArr = [...parkingSlots];\n    const newArray = latestArr.filter(x => x.id == slotID ? delete x[\"time\"] && delete x[\"registration\"] : null);\n    const response = await fetch('https://httpstat.us/200', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json'\n      },\n      body: JSON.stringify(newArray)\n    });\n    let data = await response.json();\n\n    if (response.status === 200) {\n      if (newArray.length > 0) {\n        let newData = newArray[0].isAlloted = false;\n        console.log(\"new data\", newData);\n      }\n\n      console.log(data);\n    }\n\n    setValue(value - 1);\n    navigate('/layout');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          id: \"modal-modal-title\",\n          variant: \"h4\",\n          children: \" Calculate Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"deregister-time-spent\",\n          variant: \"h6\",\n          children: [\"Total time spent :  \", time, \" hrs\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          id: \"deregister-charge\",\n          variant: \"h6\",\n          children: [\"Total Price : $ \", price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            id: \"deregister-back-button\",\n            variant: \"contained\",\n            color: \"secondary\",\n            onClick: handleBack,\n            children: \"Back \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            id: \"deregister-payment-button\",\n            style: {\n              marginLeft: \"10px\"\n            },\n            variant: \"contained\",\n            color: \"secondary\",\n            onClick: () => handlePayment(slotID),\n            children: \"Payment taken\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 10\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ModalPage, \"rFG5bcI8ls2uUehmEjqWHS+Zg9s=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = ModalPage;\nexport default ModalPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModalPage\");","map":{"version":3,"names":["React","Button","Modal","Typography","Box","Grid","useParams","useNavigate","useContext","DataContext","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","ModalPage","open","price","parkingSlots","time","value","setValue","slotID","console","log","navigate","handleBack","handlePayment","latestArr","newArray","filter","x","id","response","fetch","method","headers","Accept","body","JSON","stringify","data","json","status","length","newData","isAlloted","marginLeft"],"sources":["/home/rails/Desktop/parking_app/src/Components/ModalPage.tsx"],"sourcesContent":["import React from 'react'\nimport { Button , Modal,Typography, Box, Grid} from '@material-ui/core';\nimport { useParams , useNavigate } from 'react-router-dom';\nimport {useContext } from \"react\"\nimport DataContext from '../Context/DataContext';\n\n\n\nconst style = {\n    position: 'absolute' as 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: 400,\n    bgcolor: 'background.paper',\n    border: '2px solid #000',\n    boxShadow: 24,\n    p: 4,\n  };\n\n\n\nconst ModalPage = () => {\n  const {open, price, parkingSlots, time, value, setValue } = useContext(DataContext)\nlet {slotID} = useParams()\nconsole.log(slotID)\nlet navigate = useNavigate()\n\n\nconst handleBack = () => {\n        navigate('/layout')\n}\nconst handlePayment = async (slotID: string | undefined) => {\n    const latestArr = [...parkingSlots]\n   const newArray = latestArr.filter((x : any) => x.id == slotID ? delete x[\"time\"] && delete x[\"registration\"] : null )\n   const response = await fetch('https://httpstat.us/200', {\n    method : \"POST\",\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n    },\n    body : JSON.stringify(newArray)\n  })\n   \n  let data = await response.json()\n   if (response.status === 200){\n     if(newArray.length > 0){\n      let newData = newArray[0].isAlloted = false;\n      console.log(\"new data\",newData)\n     }\n     console.log(data)\n    \n   }\n   setValue(value -1)\n   navigate('/layout')\n}\n\n  return (\n    <div>\n      <Modal\n        open={open}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={style}>\n          <Typography id=\"modal-modal-title\" variant=\"h4\"> Calculate Price</Typography>\n          <Typography id = \"deregister-time-spent\" variant=\"h6\">Total time spent :  {time} hrs</Typography>\n          <Typography id = \"deregister-charge\" variant=\"h6\">Total Price : $ {price}</Typography>\n         <hr/>\n         <Grid>\n             <Button id = \"deregister-back-button\" variant=\"contained\" color=\"secondary\" onClick = {handleBack}>Back </Button>\n             <Button id = \"deregister-payment-button\" style = {{marginLeft : \"10px\"}} variant=\"contained\" color=\"secondary\" onClick = {() => handlePayment(slotID)}>Payment taken</Button>\n         </Grid>\n        </Box>\n      </Modal>\n    </div>\n  )\n}\n\nexport default ModalPage\n\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAkBC,KAAlB,EAAwBC,UAAxB,EAAoCC,GAApC,EAAyCC,IAAzC,QAAoD,mBAApD;AACA,SAASC,SAAT,EAAqBC,WAArB,QAAwC,kBAAxC;AACA,SAAQC,UAAR,QAA0B,OAA1B;AACA,OAAOC,WAAP,MAAwB,wBAAxB;;AAIA,MAAMC,KAAK,GAAG;EACVC,QAAQ,EAAE,UADA;EAEVC,GAAG,EAAE,KAFK;EAGVC,IAAI,EAAE,KAHI;EAIVC,SAAS,EAAE,uBAJD;EAKVC,KAAK,EAAE,GALG;EAMVC,OAAO,EAAE,kBANC;EAOVC,MAAM,EAAE,gBAPE;EAQVC,SAAS,EAAE,EARD;EASVC,CAAC,EAAE;AATO,CAAd;;AAcA,MAAMC,SAAS,GAAG,MAAM;EAAA;;EACtB,MAAM;IAACC,IAAD;IAAOC,KAAP;IAAcC,YAAd;IAA4BC,IAA5B;IAAkCC,KAAlC;IAAyCC;EAAzC,IAAsDlB,UAAU,CAACC,WAAD,CAAtE;EACF,IAAI;IAACkB;EAAD,IAAWrB,SAAS,EAAxB;EACAsB,OAAO,CAACC,GAAR,CAAYF,MAAZ;EACA,IAAIG,QAAQ,GAAGvB,WAAW,EAA1B;;EAGA,MAAMwB,UAAU,GAAG,MAAM;IACjBD,QAAQ,CAAC,SAAD,CAAR;EACP,CAFD;;EAGA,MAAME,aAAa,GAAG,MAAOL,MAAP,IAAsC;IACxD,MAAMM,SAAS,GAAG,CAAC,GAAGV,YAAJ,CAAlB;IACD,MAAMW,QAAQ,GAAGD,SAAS,CAACE,MAAV,CAAkBC,CAAD,IAAaA,CAAC,CAACC,EAAF,IAAQV,MAAR,GAAiB,OAAOS,CAAC,CAAC,MAAD,CAAR,IAAoB,OAAOA,CAAC,CAAC,cAAD,CAA7C,GAAgE,IAA9F,CAAjB;IACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,yBAAD,EAA4B;MACvDC,MAAM,EAAG,MAD8C;MAEvDC,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEPC,MAAM,EAAE;MAFD,CAF8C;MAMvDC,IAAI,EAAGC,IAAI,CAACC,SAAL,CAAeX,QAAf;IANgD,CAA5B,CAA5B;IASD,IAAIY,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAT,EAAjB;;IACC,IAAIT,QAAQ,CAACU,MAAT,KAAoB,GAAxB,EAA4B;MAC1B,IAAGd,QAAQ,CAACe,MAAT,GAAkB,CAArB,EAAuB;QACtB,IAAIC,OAAO,GAAGhB,QAAQ,CAAC,CAAD,CAAR,CAAYiB,SAAZ,GAAwB,KAAtC;QACAvB,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBqB,OAAvB;MACA;;MACDtB,OAAO,CAACC,GAAR,CAAYiB,IAAZ;IAED;;IACDpB,QAAQ,CAACD,KAAK,GAAE,CAAR,CAAR;IACAK,QAAQ,CAAC,SAAD,CAAR;EACF,CAvBD;;EAyBE,oBACE;IAAA,uBACE,QAAC,KAAD;MACE,IAAI,EAAET,IADR;MAEE,mBAAgB,mBAFlB;MAGE,oBAAiB,yBAHnB;MAAA,uBAKE,QAAC,GAAD;QAAK,EAAE,EAAEX,KAAT;QAAA,wBACE,QAAC,UAAD;UAAY,EAAE,EAAC,mBAAf;UAAmC,OAAO,EAAC,IAA3C;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE,QAAC,UAAD;UAAY,EAAE,EAAG,uBAAjB;UAAyC,OAAO,EAAC,IAAjD;UAAA,mCAA2Ec,IAA3E;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF,eAGE,QAAC,UAAD;UAAY,EAAE,EAAG,mBAAjB;UAAqC,OAAO,EAAC,IAA7C;UAAA,+BAAmEF,KAAnE;QAAA;UAAA;UAAA;UAAA;QAAA,QAHF,eAIC;UAAA;UAAA;UAAA;QAAA,QAJD,eAKC,QAAC,IAAD;UAAA,wBACI,QAAC,MAAD;YAAQ,EAAE,EAAG,wBAAb;YAAsC,OAAO,EAAC,WAA9C;YAA0D,KAAK,EAAC,WAAhE;YAA4E,OAAO,EAAIS,UAAvF;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADJ,eAEI,QAAC,MAAD;YAAQ,EAAE,EAAG,2BAAb;YAAyC,KAAK,EAAI;cAACqB,UAAU,EAAG;YAAd,CAAlD;YAAyE,OAAO,EAAC,WAAjF;YAA6F,KAAK,EAAC,WAAnG;YAA+G,OAAO,EAAI,MAAMpB,aAAa,CAACL,MAAD,CAA7I;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAFJ;QAAA;UAAA;UAAA;UAAA;QAAA,QALD;MAAA;QAAA;QAAA;QAAA;MAAA;IALF;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAoBD,CAvDD;;GAAMP,S;UAESd,S,EAEAC,W;;;KAJTa,S;AAyDN,eAAeA,SAAf"},"metadata":{},"sourceType":"module"}